<%= form_with model: address, url: (defined?(addresses_path) ? addresses_path : "/addresses"), local: true do |f| %>
  <div class="field-group">
    <%= f.label :first_name, "First name" %>
    <%= f.text_field :first_name, class: "input", required: true %>
  </div>

  <div class="field-group">
    <%= f.label :last_name, "Last name" %>
    <%= f.text_field :last_name, class: "input", required: true %>
  </div>

  <div class="field-group">
    <%= f.label :street_address, "Address" %>
    <%= f.text_field :street_address, class: "input", required: true %>
  </div>

  <div class="split-row">
    <div class="field-group">
      <%= f.label :city %>
      <%= f.text_field :city, class: "input", required: true %>
    </div>
    <div class="field-group">
      <%= f.label :state, "State / Region" %>
      <%= f.text_field :state, class: "input" %>
    </div>
  </div>

  <div class="split-row">
    <div class="field-group">
      <%= f.label :postal_code, "Postal / ZIP code" %>
      <%= f.text_field :postal_code, class: "input", required: true %>
    </div>
    <div class="field-group">
      <%= f.label :phone, "Phone (optional)" %>
      <%= f.telephone_field :phone, class: "input" %>
    </div>
  </div>

  <div class="field-group">
    <label class="inline">
      <%= f.check_box :is_default %>
      <span>Set as default shipping address</span>
    </label>
  </div>

  <div class="actions">
    <%= f.submit "Save address", class: "btn btn-secondary" %>
    <%# Save and return to checkout %>
    <%= submit_tag "Save & continue to checkout", name: "return_to", value: "checkout", class: "btn btn-primary" %>
    <%= link_to "Cancel", request.referer || addresses_path, class: "btn btn-link" %>
  </div>
<% end %>