=<div class="max-w-4xl mx-auto mt-10 px-4">
  <div class="bg-white rounded-2xl shadow-md border border-gray-100 p-8">

    <!-- Top: avatar + basic info + quick actions -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
      <div class="flex items-center gap-5">
        <!-- Profile Avatar -->
        <div class="relative group">
          <% if current_user.profile_image.attached? %>
            <%= image_tag current_user.profile_image.variant(resize_to_fill: [96, 96]),
                          alt: "Profile",
                          class: "w-24 h-24 rounded-full object-cover border-4 border-indigo-500 shadow-lg" %>
          <% else %>
            <div class="w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center border-4 border-indigo-500 shadow-lg text-4xl text-indigo-400">
              <i class="fa fa-user"></i>
            </div>
          <% end %>

          <div class="absolute bottom-0 right-0 p-1 bg-white rounded-full shadow border border-gray-200">
            <label class="cursor-pointer">
              <i class="fa fa-camera text-indigo-500"></i>
              <%= form_with model: current_user,
                            url: profile_path,
                            method: :patch,
                            local: true,
                            html: { multipart: true, style: "display:inline;" } do |f| %>
                <%= f.file_field :profile_image,
                                 class: "hidden",
                                 onchange: "this.form.submit();" %>
              <% end %>
            </label>
          </div>
        </div>

        <!-- Basic identity -->
        <div>
          <div class="flex items-center gap-2">
            <span class="font-semibold text-xl">
              <%= [current_user.first_name, current_user.last_name].compact.join(" ").strip.presence || current_user.email.split('@')[0] %>
            </span>
            <span class="inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold bg-indigo-50 text-indigo-600">
              <i class="fa fa-star mr-1 text-[10px]"></i> LuxeCart member
            </span>
          </div>
          <div class="text-gray-500 text-sm mt-1 flex items-center gap-2">
            <i class="fa fa-envelope text-gray-400"></i>
            <span><%= current_user.email %></span>
          </div>
          <div class="text-gray-400 text-xs mt-1">
            Joined <%= l(current_user.created_at.to_date, format: :long) %>
          </div>
        </div>
      </div>

      <!-- Quick actions on the right -->
      <div class="flex flex-col items-stretch gap-2 w-full md:w-auto">
        <!-- Devise account settings (change email/password etc.) -->
        <%= link_to "Account settings",
                    edit_user_registration_path,
                    class: "inline-flex items-center justify-center gap-2 px-4 py-2 rounded-full border border-gray-200 text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-indigo-300 transition" %>

        <%= link_to "Change password",
                    edit_user_registration_path,
                    class: "inline-flex items-center justify-center gap-2 px-4 py-2 rounded-full bg-gray-900 text-white text-sm font-medium hover:bg-indigo-600 transition" %>
      </div>
    </div>

    <!-- Divider -->
    <hr class="my-6">

    <!-- Simple stats row -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">
      <div class="border border-gray-100 rounded-xl p-4 bg-gray-50">
        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide">Total orders</p>
        <p class="mt-1 text-2xl font-bold text-gray-900">
          <%= @user.orders.count %>
        </p>
        <p class="text-xs text-gray-400 mt-1">
          Thank you for shopping with us!
        </p>
      </div>

      <div class="border border-gray-100 rounded-xl p-4 bg-gray-50">
        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide">Member since</p>
        <p class="mt-1 text-lg font-semibold text-gray-900">
          <%= l(@user.created_at.to_date, format: :long) %>
        </p>
        <p class="text-xs text-gray-400 mt-1">
          Keep your profile updated for a smoother checkout.
        </p>
      </div>
    </div>

    <!-- Two-column: profile details + recent orders -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

      <!-- Profile details -->
      <div>
        <h3 class="text-lg font-semibold mb-3 flex items-center gap-2">
          <i class="fa fa-id-card text-indigo-500"></i>
          Profile details
        </h3>
        <div class="border border-gray-100 rounded-xl divide-y text-sm">
          <div class="flex justify-between px-4 py-3">
            <span class="text-gray-500">Full name</span>
            <span class="font-medium text-gray-900">
              <%= [@user.first_name, @user.last_name].compact.join(" ").strip.presence || "Not set" %>
            </span>
          </div>

          <div class="flex justify-between px-4 py-3">
            <span class="text-gray-500">Email</span>
            <span class="font-medium text-gray-900"><%= @user.email %></span>
          </div>
        </div>
        <p class="mt-2 text-xs text-gray-400">
          To change your name or email, you can update your account details from the account settings page.
        </p>
      </div>

      <!-- Recent Orders -->
      <div>
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-lg font-semibold flex items-center gap-2">
            <i class="fa fa-shopping-bag text-indigo-500"></i>
            Recent orders
          </h3>

          <!-- If you DON'T have orders_path, delete this link -->
          <%= link_to "View all orders",
                      orders_path,
                      class: "text-xs text-indigo-600 hover:text-indigo-800 font-medium" %>
        </div>

        <% if @recent_orders.any? %>
          <div class="border border-gray-100 rounded-xl overflow-hidden text-sm bg-gray-50">
            <table class="min-w-full">
              <thead class="bg-gray-100 text-gray-500 text-xs uppercase tracking-wide">
                <tr>
                  <th class="px-4 py-2 text-left">Order</th>
                  <th class="px-4 py-2 text-left">Date</th>
                  <th class="px-4 py-2 text-right">Total</th>
                </tr>
              </thead>
              <tbody class="divide-y">
                <% @recent_orders.each do |order| %>
                  <tr class="bg-white hover:bg-indigo-50 transition">
                    <td class="px-4 py-2">
                      <!-- If you DON'T have order_path(order), replace with plain text -->
                      <%= link_to "##{order.id}",
                                  order_path(order),
                                  class: "text-indigo-600 hover:underline font-medium" %>
                    </td>
                    <td class="px-4 py-2 text-gray-500">
                      <%= l(order.created_at, format: :short) %>
                    </td>
                    <td class="px-4 py-2 text-right font-semibold text-indigo-700">
                      <%= number_to_currency(order.total_price) %>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        <% else %>
          <div class="border border-dashed border-gray-300 rounded-xl py-8 px-4 text-center bg-gray-50">
            <p class="text-gray-500 mb-2">You donâ€™t have any orders yet.</p>
            <%= link_to "Start shopping",
                        products_path,
                        class: "inline-flex items-center gap-2 px-4 py-2 rounded-full bg-indigo-600 text-white text-sm font-medium hover:bg-indigo-700 shadow-sm" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>