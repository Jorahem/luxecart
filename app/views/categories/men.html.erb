<%# Men category page â€” Add buttons removed from category listing %>

<%# Helpers same as before (safe_attached?/image_for) %>

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <!-- Breadcrumb + Cart badge (unchanged) -->
  <div class="flex items-center justify-between mb-6">
    <nav class="text-sm text-gray-500" aria-label="Breadcrumb">
      <ol class="flex items-center space-x-2">
        <li><%= link_to "Home", root_path, class: "hover:underline" %></li>
        <li>/</li>
        <li><%= link_to "Categories", categories_path, class: "hover:underline" %></li>
        <li>/</li>
        <li class="text-gray-900 font-semibold"><%= @category.name %></li>
      </ol>
    </nav>

    <div>
      <a href="/cart" class="inline-flex items-center gap-2 text-sm text-gray-700 hover:text-gray-900">
        <i class="fa-solid fa-cart-shopping"></i>
        <span id="cart-count" class="inline-flex items-center justify-center bg-indigo-600 text-white rounded-full px-2 py-0.5 text-xs">
          <%= (session[:cart]&.values&.map(&:to_i)&.sum) || 0 %>
        </span>
      </a>
    </div>
  </div>

  <!-- hero etc (unchanged) -->

  <!-- Popular Men Picks: product cards without Add buttons -->
  <section class="bg-white p-4 rounded-2xl shadow-sm mb-8">
    <h2 class="text-xl font-semibold mb-4">Popular Men Picks</h2>

    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
      <% display_slots.each do |slot| %>
        <% if slot[:product] %>
          <% p = slot[:product] %>
          <% img_src = nil
             if p.respond_to?(:product_images) && p.product_images.any?
               img_src ||= image_for(p.product_images.first.image) rescue nil
               img_src ||= (p.product_images.first.respond_to?(:image_url) ? p.product_images.first.image_url : nil) rescue nil
             end
             img_src ||= (p.respond_to?(:image_url) ? p.image_url : nil) rescue nil
             img_src ||= image_for(p.image) if p.respond_to?(:image)
          %>

          <div class="border rounded-lg p-4 flex flex-col">
            <%= link_to product_path(p) do %>
              <img src="<%= img_src || 'https://via.placeholder.com/400x300?text=No+Image' %>" class="w-full h-44 object-cover rounded-md mb-3" alt="<%= p.name %>">
            <% end %>

            <div class="flex-1">
              <div class="font-semibold text-sm mb-1"><%= link_to p.name, product_path(p), class: "hover:underline" %></div>
              <div class="text-gray-600 mb-2"><%= number_to_currency(p.price) if p.respond_to?(:price) %></div>
            </div>

            <%# Add button removed on categories listing %>
          </div>

        <% else %>
          <% ph = slot[:placeholder] %>

          <div class="border rounded-lg p-4 flex flex-col">
            <img src="<%= ph[:image] %>" class="w-full h-44 object-cover rounded-md mb-3" alt="<%= ph[:name] %>">
            <div class="flex-1">
              <div class="font-semibold text-sm mb-1"><%= ph[:name] %></div>
              <div class="text-gray-600 mb-2"><%= number_to_currency(ph[:price]) %></div>
            </div>

            <%# placeholder: no Add button %>
          </div>
        <% end %>
      <% end %>
    </div>
  </section>

  <!-- All Men Products grid (no Add buttons) -->
  <section class="bg-white p-4 rounded-2xl shadow-sm">
    <h2 class="text-xl font-semibold mb-4">All Men Products</h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <% (@category.products.active.limit(12) rescue []).each do |p| %>
        <% img_src = nil
           if p.respond_to?(:product_images) && p.product_images.any?
             img_src ||= image_for(p.product_images.first.image) rescue nil
           end
           img_src ||= (p.respond_to?(:image_url) ? p.image_url : nil)
           img_src ||= image_for(p.image) if p.respond_to?(:image)
        %>

        <div class="rounded-lg border p-3 flex flex-col bg-white">
          <%= link_to product_path(p) do %>
            <img src="<%= img_src || 'https://via.placeholder.com/400x300?text=No+Image' %>" class="w-full h-40 object-cover rounded mb-3" alt="<%= p.name %>">
          <% end %>

          <div class="font-semibold"><%= link_to p.name, product_path(p) %></div>
          <div class="text-gray-600"><%= number_to_currency(p.price) if p.respond_to?(:price) %></div>

          <%# Add removed %>
        </div>
      <% end %>
    </div>
  </section>
</div>