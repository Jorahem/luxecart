<li id="cart-item-<%= cart_item.id %>" class="cart-row cart-item" data-id="<%= cart_item.id %>" data-price="<%= cart_item.price.to_f %>">
  <div class="item-image">
    <% if cart_item.product.respond_to?(:image) && cart_item.product.image.attached? %>
      <%= image_tag url_for(cart_item.product.image), alt: cart_item.product.name, class: 'thumb' %>
    <% elsif cart_item.product.respond_to?(:image_url) && cart_item.product.image_url.present? %>
      <img src="<%= cart_item.product.image_url %>" alt="<%= cart_item.product.name %>" class="thumb" />
    <% else %>
      <div class="thumb placeholder">No image</div>
    <% end %>
  </div>

  <div class="item-details">
    <div class="item-name"><%= cart_item.product&.name || "Product ##{cart_item.product_id}" %></div>
    <div class="item-price"><%= number_to_currency(cart_item.price) %></div>

    <div class="item-qty">
      <button class="qty-decrease" data-item-id="<%= cart_item.id %>">âˆ’</button>
      <input id="qty-input-<%= cart_item.id %>" class="qty-input" data-item-id="<%= cart_item.id %>" type="number" min="1" value="<%= cart_item.quantity %>" />
      <button class="qty-increase" data-item-id="<%= cart_item.id %>">+</button>
    </div>

    <div class="item-subtotal"><%= number_to_currency(cart_item.line_subtotal) %></div>
  </div>

  <div class="item-actions">
    <a href="<%= remove_item_cart_path(cart_item) %>" class="remove-item" data-item-id="<%= cart_item.id %>">Remove</a>
  </div>
</li>