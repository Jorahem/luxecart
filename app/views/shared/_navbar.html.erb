<nav class="site-navbar">
  <div class="container navbar-inner">
    <div class="brand">
      <%= link_to 'LuxeCart', root_path, class: 'brand-link' %>
    </div>

    <button id="nav-toggle" aria-label="Toggle navigation" class="nav-toggle" aria-expanded="false">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>

    <ul class="nav-links" id="nav-links">
      <li class="<%= nav_active_class(root_path) %>"><%= link_to 'Home', root_path %></li>
      <li class="<%= nav_active_class(products_path) %>"><%= link_to 'Products', products_path %></li>
      <li class="<%= nav_active_class(categories_path) %>"><%= link_to 'Categories', categories_path %></li>
      <li class="<%= nav_active_class(about_path) %>"><%= link_to 'About', about_path %></li>
      <li class="<%= nav_active_class(returns_path) %>"><%= link_to 'Returns', returns_path %></li>

      <!-- Contact added -->
      <li class="contact-link <%= nav_active_class(contact_path) %>">
        <%= link_to 'Contact', contact_path %>
      </li>
    </ul>

    <div class="nav-actions">
      <!-- Theme toggle button (light/dark) -->
      <button id="theme-toggle" class="theme-toggle-btn" aria-label="Toggle color theme" title="Toggle color theme" type="button">
        <!-- Light (sun) icon - shown when NOT dark -->
        <svg id="theme-toggle-light-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" width="20" height="20" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6" d="M12 3v2M12 19v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42M12 7a5 5 0 100 10 5 5 0 000-10z"/>
        </svg>

        <!-- Dark (moon) icon - shown when dark -->
        <svg id="theme-toggle-dark-icon" class="hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" width="20" height="20" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
        </svg>
      </button>

      <%= link_to cart_path, class: 'cart-link' do %>
        <svg class="cart-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 3h2l.4 2M7 13h10l4-8H5.4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="10" cy="20" r="1" fill="currentColor" />
          <circle cx="18" cy="20" r="1" fill="currentColor" />
        </svg>
        <span class="cart-text">Cart</span>
        <span class="cart-badge" id="cart-count"><%= cart_item_count %></span>
      <% end %>

      <%# === Auth links === %>
      <% if user_signed_in? %>
        <%= link_to "Logout",
                    destroy_user_session_path,
                    data: { turbo_method: :delete },
                    class: "nav-auth-link ml-4" %>
      <% else %>
        <%= link_to "Login",
                    new_user_session_path,
                    class: "nav-auth-link ml-4" %>
      <% end %>
    </div>
  </div>
</nav>